<style>
  .featured-categories {
    position: relative;
    padding: 2rem 0;
    padding-top: 100px;
  }

  .featured-categories__header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
  }

  .featured-categories__title {
    font-size: 1.5rem;
    font-weight: 600;
  }

  .featured-categories__wrapper {
    display: flex;
    align-items: center;
    gap: 10px;
    overflow: hidden;
    position: relative;
  }

  .featured-categories__track {
    display: flex;
    transition: transform 0.3s ease;
  }

  .featured-category-card {
    flex: 0 0 auto;
    text-align: center;
    border-radius: 10px;
    overflow: hidden;
    padding: 15px;
    box-sizing: border-box;
    transition: transform 0.3s ease;
    margin-right: 20px;
  }
  .featured-category-card-image {
    transition: transform 0.3s ease;
  }
  .featured-category-card:hover .featured-category-card-image {
    transform: translateY(-4px);
  }

  .featured-category-card img {
    width: 80px;
    height: 80px;
    object-fit: contain;
    margin: 10px auto;
  }

  .featured-category-card h3 {
    font-size: 0.95rem;
    font-weight: 500;
  }

  .featured-categories__arrow {
    background: #e50914;
    border: none;
    color: white;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    transition: background 0.2s ease;
  }

  .featured-categories__arrow:hover {
    background: #b40710;
  }

  .featured-categories__arrows {
    display: flex;
    gap: 8px;
  }

  @media (max-width: 768px) {
    .featured-category-card img {
      width: 60px;
      height: 60px;
    }
    .featured-categories__title {
      font-size: 1.2rem;
    }
    .featured-categories__wrapper {
      overflow-x: scroll;
    }
  }
</style>
<div class="featured-categories-wrapper 
    section
    section--page-width
    section-resource-list
    spacing-style
    gap-style
  ">
    <div class="featured-categories" id="FeaturedCategories-{{ section.id }}">
    <div class="featured-categories__header">
        <h2 class="featured-categories__title">{{ section.settings.heading }}</h2>
        <div class="featured-categories__arrows">
        <button class="featured-categories__arrow prev" aria-label="Previous">
          
<svg width="27" height="27" viewBox="0 0 27 27" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M4.67449 13.2008C4.67397 13.0924 4.69512 12.985 4.73667 12.8849C4.77823 12.7848 4.83936 12.694 4.91648 12.6178L11.5165 6.01781C11.6729 5.87208 11.8797 5.79275 12.0935 5.79652C12.3072 5.80029 12.5111 5.88687 12.6623 6.03802C12.8134 6.18918 12.9 6.3931 12.9038 6.60683C12.9075 6.82057 12.8282 7.02742 12.6825 7.18381L6.66548 13.2008L12.6825 19.2178C12.8282 19.3742 12.9075 19.5811 12.9038 19.7948C12.9 20.0085 12.8134 20.2124 12.6623 20.3636C12.5111 20.5147 12.3072 20.6013 12.0935 20.6051C11.8797 20.6089 11.6729 20.5295 11.5165 20.3838L4.91648 13.7838C4.83936 13.7076 4.77823 13.6168 4.73667 13.5167C4.69512 13.4166 4.67397 13.3092 4.67449 13.2008Z" fill="white"/>
<path d="M4.67501 13.2C4.67786 12.9821 4.7657 12.7739 4.9198 12.6198C5.07391 12.4657 5.2821 12.3778 5.50001 12.375L20.9 12.375C21.1188 12.375 21.3287 12.4619 21.4834 12.6166C21.6381 12.7714 21.725 12.9812 21.725 13.2C21.725 13.4188 21.6381 13.6286 21.4834 13.7834C21.3287 13.9381 21.1188 14.025 20.9 14.025L5.50001 14.025C5.2821 14.0222 5.07391 13.9343 4.9198 13.7802C4.7657 13.6261 4.67786 13.4179 4.67501 13.2Z" fill="white"/>
</svg>

        </button>
        <button class="featured-categories__arrow next" aria-label="Next">
          <svg style="transform: rotate(178deg);" width="27" height="27" viewBox="0 0 27 27" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M4.67449 13.2008C4.67397 13.0924 4.69512 12.985 4.73667 12.8849C4.77823 12.7848 4.83936 12.694 4.91648 12.6178L11.5165 6.01781C11.6729 5.87208 11.8797 5.79275 12.0935 5.79652C12.3072 5.80029 12.5111 5.88687 12.6623 6.03802C12.8134 6.18918 12.9 6.3931 12.9038 6.60683C12.9075 6.82057 12.8282 7.02742 12.6825 7.18381L6.66548 13.2008L12.6825 19.2178C12.8282 19.3742 12.9075 19.5811 12.9038 19.7948C12.9 20.0085 12.8134 20.2124 12.6623 20.3636C12.5111 20.5147 12.3072 20.6013 12.0935 20.6051C11.8797 20.6089 11.6729 20.5295 11.5165 20.3838L4.91648 13.7838C4.83936 13.7076 4.77823 13.6168 4.73667 13.5167C4.69512 13.4166 4.67397 13.3092 4.67449 13.2008Z" fill="white"/>
<path d="M4.67501 13.2C4.67786 12.9821 4.7657 12.7739 4.9198 12.6198C5.07391 12.4657 5.2821 12.3778 5.50001 12.375L20.9 12.375C21.1188 12.375 21.3287 12.4619 21.4834 12.6166C21.6381 12.7714 21.725 12.9812 21.725 13.2C21.725 13.4188 21.6381 13.6286 21.4834 13.7834C21.3287 13.9381 21.1188 14.025 20.9 14.025L5.50001 14.025C5.2821 14.0222 5.07391 13.9343 4.9198 13.7802C4.7657 13.6261 4.67786 13.4179 4.67501 13.2Z" fill="white"/>
</svg>
        </button>
        </div>
    </div>

    <div class="featured-categories__wrapper">
        <div class="featured-categories__track">
        {% for block in section.blocks %}
          <div
          class="featured-category-card"
          style="background-color: {{ block.settings.bg_color }}; width: calc((100% / {{ section.settings.desktop_visible }}) - 20px);"
          >
            {%if block.settings.collection_link %}<a href="{{ block.settings.collection_link.url }}">{% endif %}
              {% if block.settings.image != blank %}
                  <img class="featured-category-card-image" src="{{ block.settings.image | img_url: '150x150' }}" alt="{{ block.settings.title }}">
                {% endif %}
                <h3>{{ block.settings.title }}</h3>
              {%if block.settings.collection_link %}</a>{% endif %}
            </div>
        {% endfor %}
        </div>
    </div>
    </div>
</div>
<script>
  (() => {
    const section = document.getElementById('FeaturedCategories-{{ section.id }}');
    const track = section.querySelector('.featured-categories__track');
    const prev = section.querySelector('.featured-categories__arrow.prev');
    const next = section.querySelector('.featured-categories__arrow.next');
    const cards = section.querySelectorAll('.featured-category-card');

    let index = 0;
    const totalCards = cards.length;
    const visibleDesktop = {{ section.settings.desktop_visible }};
    const visibleMobile = {{ section.settings.mobile_visible }};
    const isMobile = () => window.innerWidth < 768;

    const updateSlide = () => {
      const visible = isMobile() ? visibleMobile : visibleDesktop;
      const maxIndex = Math.max(0, totalCards - visible);
      if (index < 0) index = 0;
      if (index > maxIndex) index = maxIndex;
      const cardWidth = cards[0].offsetWidth;
      track.style.transform = `translateX(-${index * cardWidth}px)`;
    };

    prev.addEventListener('click', () => {
      index--;
      updateSlide();
    });
    next.addEventListener('click', () => {
      index++;
      updateSlide();
    });

    window.addEventListener('resize', updateSlide);
    updateSlide();
  })();
</script>

{% schema %}
{
  "name": "Featured Categories",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Section heading",
      "default": "Featured Categories"
    },
    {
      "type": "range",
      "id": "desktop_visible",
      "label": "Cards visible (desktop)",
      "min": 3,
      "max": 12,
      "step": 1,
      "default": 10
    },
    {
      "type": "range",
      "id": "mobile_visible",
      "label": "Cards visible (mobile)",
      "min": 1,
      "max": 6,
      "step": 1,
      "default": 4
    }
  ],
  "blocks": [
    {
      "type": "category",
      "name": "Category",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Category title",
          "default": "Category Name"
        },
        {
          "type": "collection",
          "id": "collection_link",
          "label": "Collection"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Category image"
        },
        {
          "type": "color",
          "id": "bg_color",
          "label": "Background color",
          "default": "#f3f3f3"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Featured Categories",
      "category": "Custom Sections"
    }
  ]
}
{% endschema %}
