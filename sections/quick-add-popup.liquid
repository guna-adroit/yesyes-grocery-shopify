{% comment %}
  Quick Add Popup Section for Horizon theme
  Dynamically loaded via Section Rendering API
{% endcomment %}

<quick-add-popup id="QuickAddPopup" class="quick-add-popup hidden" role="dialog" aria-modal="true">
  <div class="popup-overlay"></div>
  <div class="popup-content">
    <button class="popup-close" aria-label="Close">
      {{- 'icon-close.svg' | inline_asset_content -}}
    </button>
    <div id="QuickAddPopupContent" class="quick-add-popup__content">
        <h2>{{ product.title }}</h2>
        {%unless product.has_only_default_variant %}
        <div class="variants-container">
            {% for option in product.options_with_values %}
              <fieldset>
                <legend>{{ option.name }}</legend>
                <div class="quick-add_product-variant-details">
                {% for value in option.values %}
                    <div class="product_variant_item">
                        <div class="product_variant-image">
                            <img src="{{ product.featured_image | image_url: width: 200 }}" width="" height="" alt="">
                        </div>
                        <div class="product_variant-title">
                            <p>{{ product.title }}</p>
                            <p class="product_variant-name">{{ value.name }}</p>
                        </div>
                        <div class="product_variant-price-container">
                            <div class="product_variant-price">
                                <span class="product-price">{{ product.price | money }}</span>
                                {% if product.compare_at_price %}
                                <span class="product-compare-price">{{ product.compare_at_price | money }}</span>
                                {% endif %}
                            </div>
                            <div class="product_variant-details">
                                <span>$18.00/L</span>
                            </div>
                        </div>
                    </div>
                {% comment %} <input type="radio" value="{{ value.variant.id}}">
                <label>{{ value.name }}</label> {% endcomment %}
                {% endfor %}
                </div>
              </fieldset>
            {% endfor %}
        </div>
        {% endunless %}
      {% if product %}
         {% content_for 'block', type: 'buy-buttons', id: 'buyButton' %}
      {% else %}
        <p>Loading product information...</p>
      {% endif %}
    </div>
  </div>
</quick-add-popup>

<style>
.quick-add-popup {
  position: fixed;
  inset: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 9999;
}
.quick-add-popup.hidden { display: none; }
.popup-overlay {
  position: absolute;
  inset: 0;
  background: rgba(0,0,0,0.5);
}
.popup-content {
  position: relative;
  background: #fff;
  max-width: 600px;
  width: 90%;
  padding: 24px;
  border-radius: 12px;
  z-index: 2;
}
.popup-close {
  position: absolute;
    top: -40px;
    right: -40px;
    border: none;
    cursor: pointer;
    width: 44px;
    height: 44px;
    background: #D9D9D9;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 200px;
    color: #E90000;
}
.quick-add_product-variant-details {
    display: flex;
    flex-direction: column;
    width: 100%;
    gap: 10px;
}
.quick-add-popup__content fieldset{
  border: none;
}
.variants-container{
  margin-bottom: 15px;
}
.quick-add-popup__content h2{
  font-weight: 700;
  font-size: 24px;
  line-height: 28px;
}
.product_variant_item{
            display: flex;
            gap: 20px;
            background-color:  #fee9e9;
            border-radius: 8px;
            padding: 18px 22px;
        }
        .product_variant-image img{
            width: 77px;
            border-radius: 7px;;
        }
        .product_variant-title{
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        .product-compare-price{
            text-decoration: line-through;
            color: #7F7474;
            font-weight: 600;
            font-size: 14px;
            line-height: 19.6px;
        }
        .product_variant-title p{
            font-weight: 500;
            font-size: 18px;
            line-height: 25.2px;
            margin: 0;
        }
        .product_variant-name{
          font-weight: 700;
          font-size: 18px;
          line-height: 25.2px;
        }
        .product_variant-price{
          display: flex;
          gap: 24px;
        }
        .product_variant-price span{
            font-weight: 600;
            font-size: 14px;
            line-height: 19.6px;
        }
        span.product-price, span.product_variant-details{
            font-size: 600;
        }
</style>
