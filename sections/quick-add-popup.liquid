{% comment %}
  Quick Add Popup Section for Horizon theme
  Dynamically loaded via Section Rendering API
{% endcomment %}

<quick-add-popup id="QuickAddPopup" class="quick-add-popup hidden" role="dialog" aria-modal="true">
  <div class="popup-overlay"></div>
  <div class="popup-content">
    <button class="popup-close" aria-label="Close">
      {{- 'icon-close.svg' | inline_asset_content -}}
    </button>
    <div id="QuickAddPopupContent" class="quick-add-popup__content">
        <h2>{{ product.title }}</h2>
        {%unless product.has_only_default_variant %}
        <div class="variants">
            {% for option in product.options_with_values %}
              <fieldset>
                <legend>{{ option.name }}</legend>
                {% for value in option.values %}

                  <div class="quick-add_product-variant-details">
                    <div class="product_variant_item">
                        <div class="product_variant-image">
                            <img src="{{ product.featured_image | image_url: width: 200 }}" width="" height="" alt="">
                        </div>
                        <div class="product_variant-title">
                            <p>{{ product.title }}</p>
                            <p class="product_variant-name">{{ value.name }}</p>
                        </div>
                        <div class="product_variant-price">
                            <div>
                                <span class="product-price">{{ product.price | money_with_currency }}</span>
                                {% if product.compare_at_price %}
                                <span class="product-compare-price">{{ product.compare_at_price | money_with_currency }}</span>
                                {% endif %}
                            </div>
                            <div class="product_variant-details">
                                <span>$18.00/L</span>
                            </div>
                        </div>
                    </div>
                </div>
                <input type="radio" value="{{ value.variant.id}}">
                <label>{{ value.name }}</label>
                {% endfor %}
              </fieldset>
            {% endfor %}
        </div>
        {% endunless %}
      {% if product %}
         {% content_for 'block', type: 'buy-buttons', id: 'buyButton' %}
      {% else %}
        <p>Loading product information...</p>
      {% endif %}
    </div>
  </div>
</quick-add-popup>

<style>
.quick-add-popup {
  position: fixed;
  inset: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 9999;
}
.quick-add-popup.hidden { display: none; }
.popup-overlay {
  position: absolute;
  inset: 0;
  background: rgba(0,0,0,0.5);
}
.popup-content {
  position: relative;
  background: #fff;
  max-width: 600px;
  width: 90%;
  padding: 24px;
  border-radius: 12px;
  z-index: 2;
}
.popup-close {
  position: absolute;
  top: 12px;
  right: 12px;
  background: transparent;
  border: none;
  cursor: pointer;
}
</style>
