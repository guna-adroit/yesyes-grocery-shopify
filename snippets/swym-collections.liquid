<script defer>
  function swymCallbackFn(swat) {
    // Re-init Swym after collection updates
    document.addEventListener('swym:collections-loaded', function () {
      setTimeout(function () {
        swat.initializeActionButtons('body');
      }, 500);
    });

    // Prevent product link navigation ONLY when wishlist is inside a product card link
    document.addEventListener(
      'click',
      function (e) {
        var swymBtn = e.target.closest('.swym-button');
        if (!swymBtn) return;

        var productLink = swymBtn.closest('a.product-card__link');
        if (productLink) {
          e.preventDefault();      // stop navigation
          e.stopImmediatePropagation(); // but allow Swym to handle internally
        }
      },
      true
    );
  }

  if (!window.SwymCallbacks) {
    window.SwymCallbacks = [];
  }
  window.SwymCallbacks.push(swymCallbackFn);
</script>
<script>
  document.addEventListener(
    'pointerdown',
    function (e) {
      if (e.target.closest('.swym-button')) {
        const pcl = e.target.closest('product-card-link');
        if (pcl) {
          e.stopImmediatePropagation();
        }
      }
    },
    true
  );

  document.addEventListener(
    'click',
    function (e) {
      if (e.target.closest('.swym-button')) {
        const pcl = e.target.closest('product-card-link');
        if (pcl) {
          e.preventDefault();
          e.stopImmediatePropagation();
          return false;
        }
      }
    },
    true
  );
</script>

<style>
  .swym-button {
  position: relative;
  z-index: 999 !important;
}

.product-card__link {
  z-index: 1;
}

</style>

<style>
    {% comment %} SWYM NOTE: CSS refined using AI {% endcomment %}
  /* =========================================
    Swym: Wishlist Override
    ========================================= */

  /* 1. CONTAINER: Match the border, radius, and padding */
  div[role="button"][aria-labelledby] {
      border: 1px solid rgb(209, 209, 209) !important;
      border-radius: 7px !important;
      padding: 16px !important;
      background-color: transparent !important;
      box-shadow: none !important;
      height: auto !important; /* Let content dictate height */
      min-height: 100% !important;
      display: flex !important;
      flex-direction: column !important;
      justify-content: flex-start !important;
      gap: 10px !important;
  }

  /* 2. IMAGE: Fix aspect ratio and remove app's borders */
  div[role="button"][aria-labelledby] img {
      border-radius: 0 !important;
      aspect-ratio: 1 / 1 !important; /* Force Square */
      object-fit: contain !important;
      width: 100% !important;
      height: auto !important;
      margin-bottom: 15px !important;
  }

  /* 3. TITLE: Reset H2 to match the Collection H3 (Inter, 13px) */
  div[role="button"][aria-labelledby] h2 {
      font-family: 'Inter', sans-serif !important;
      font-size: 16px !important;
      font-weight: 600 !important;
      line-height: 1.4 !important;
      color: rgb(0, 0, 0) !important;
      text-align: left !important;
      text-transform: none !important;
      margin: 0 !important;
      height: auto !important;
      width: 100% !important;
      overflow: visible !important;
      white-space: normal !important;
  }

  /* Fix the button wrapping the title */
  div[role="button"][aria-labelledby] button:has(h2) {
      height: auto !important;
      width: 100% !important;
      margin: 0 !important;
      padding: 0 !important;
  }

  /* 4. PRICE: Match the bold 20px look */
  div[role="button"][aria-labelledby] div[aria-label^="$"] {
      font-family: 'Inter', sans-serif !important;
      font-size: 20px !important;
      font-weight: 700 !important;
      color: rgb(0, 0, 0) !important;
      text-align: left !important;
      margin-top: 5px !important;
  }

  /* 5. ADD TO TROLLEY BUTTON: The biggest transformation (Black -> Red Outline) */
  div[role="button"][aria-labelledby] button[aria-label="Add To Trolley"], div[role="button"][aria-labelledby] button[aria-label="Sold Out"] {
      background-color: transparent !important;
      color: rgb(237, 29, 35) !important; /* Client's Red */
      border: 1px solid rgb(237, 29, 35) !important;
      border-radius: 14px !important; /* The pill shape */
      font-family: 'Inter', sans-serif !important;
      font-size: 14px !important;
      font-weight: 700 !important;
      text-transform: capitalize !important; /* "Add To Trolley" style */
      padding: 10px 20px !important;
      height: auto !important;
      width: 100% !important;
      margin: 10px 0 0 0 !important;
      transition: all 0.3s ease !important;
      cursor: pointer !important;
  }

  div[role="button"][aria-labelledby] button[aria-label="Sold Out"] {
      cursor: not-allowed !important;
  }

  /* Hover Effect for Button */
  div[role="button"][aria-labelledby] button[aria-label="Add To Trolley"]:hover, div[role="button"][aria-labelledby] button[aria-label="Sold Out"]:hover {
      background-color: rgb(237, 29, 35) !important;
      color: white !important;
  }

  /* 6. CLEANUP: Hide the weird duplicate title at the top */
  div[role="button"][aria-labelledby] > span:first-child {
      display: none !important;
  }

  /* 7. DELETE BUTTON: Position the X correctly */
  div[role="button"][aria-labelledby] button[aria-label^="Delete"] {
      top: 5px !important;
      right: 5px !important;
      left: auto !important;
      background: white !important;
      border-radius: 50% !important;
      width: 30px !important;
      height: 30px !important;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1) !important;
  }

  /* =========================================
  Swym: Trolley Icon Injection
  ========================================= */
  
  /* 1. FLEXBOX: Align the icon and text horizontally */
  div[role="button"][aria-labelledby] button[aria-label="Add To Trolley"] {
    display: flex !important;
    justify-content: center !important;
    align-items: center !important;
    gap: 8px !important; /* Space between icon and text */
  }
  
  /* 2. INJECT ICON: Create the fake element before the text */
  div[role="button"][aria-labelledby] button[aria-label="Add To Trolley"]::before {
    content: "" !important;
    display: block !important;
    width: 20px !important; /* Width of the icon */
    height: 20px !important; /* Height of the icon */
    
    /* The Magic: SVG Encoded as a Background Image */
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='rgb(237, 29, 35)'%3E%3Cpath d='M17,18C15.89,18 15,18.89 15,20A2,2 0 0,0 17,22A2,2 0 0,0 19,20C19,18.89 18.1,18 17,18M1,2V4H3L6.6,11.59L5.24,14.04C5.09,14.32 5,14.65 5,15A2,2 0 0,0 7,17H19V15H7.42A0.25,0.25 0 0,1 7.17,14.75C7.17,14.7 7.18,14.66 7.2,14.63L8.1,13H15.55C16.3,13 16.96,12.58 17.3,11.97L20.88,5.5C20.95,5.34 21,5.17 21,5A1,1 0 0,0 20,4H5.21L4.27,2M7,18C5.89,18 5,18.89 5,20A2,2 0 0,0 7,22A2,2 0 0,0 9,20C9,18.89 8.1,18 7,18Z'/%3E%3C/svg%3E") !important;
    
    background-repeat: no-repeat !important;
    background-position: center !important;
    background-size: contain !important;
  }
  
  /* 3. HOVER STATE: Switch icon to WHITE when button turns red */
  div[role="button"][aria-labelledby] button[aria-label="Add To Trolley"]:hover::before {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3E%3Cpath d='M17,18C15.89,18 15,18.89 15,20A2,2 0 0,0 17,22A2,2 0 0,0 19,20C19,18.89 18.1,18 17,18M1,2V4H3L6.6,11.59L5.24,14.04C5.09,14.32 5,14.65 5,15A2,2 0 0,0 7,17H19V15H7.42A0.25,0.25 0 0,1 7.17,14.75C7.17,14.7 7.18,14.66 7.2,14.63L8.1,13H15.55C16.3,13 16.96,12.58 17.3,11.97L20.88,5.5C20.95,5.34 21,5.17 21,5A1,1 0 0,0 20,4H5.21L4.27,2M7,18C5.89,18 5,18.89 5,20A2,2 0 0,0 7,22A2,2 0 0,0 9,20C9,18.89 8.1,18 7,18Z'/%3E%3C/svg%3E") !important;
  }

  /* =========================================
   Swym: "Added To Trolley" State
   ========================================= */

    /* 1. BUTTON STYLE: Solid Red Background + White Text */
    div[role="button"][aria-labelledby] button[aria-label="Added To Trolley"] {
        background-color: rgb(237, 29, 35) !important; /* Solid Client Red */
        color: white !important;
        border: 1px solid rgb(237, 29, 35) !important;
        border-radius: 14px !important;
        font-family: 'Inter', sans-serif !important;
        font-size: 14px !important;
        font-weight: 700 !important;
        text-transform: capitalize !important;
        padding: 10px 20px !important;
        height: auto !important;
        width: 100% !important;
        margin: 10px 0 0 0 !important;
        cursor: default !important;
        
        /* Flexbox to align the icon */
        display: flex !important;
        justify-content: center !important;
        align-items: center !important;
        gap: 8px !important;
    }

    /* 2. INJECT ICON: White Cart Icon */
    div[role="button"][aria-labelledby] button[aria-label="Added To Trolley"]::before {
        content: "" !important;
        display: block !important;
        width: 20px !important;
        height: 20px !important;
        
        /* SVG Cart (White) - Same icon as before, just fill='white' */
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3E%3Cpath d='M17,18C15.89,18 15,18.89 15,20A2,2 0 0,0 17,22A2,2 0 0,0 19,20C19,18.89 18.1,18 17,18M1,2V4H3L6.6,11.59L5.24,14.04C5.09,14.32 5,14.65 5,15A2,2 0 0,0 7,17H19V15H7.42A0.25,0.25 0 0,1 7.17,14.75C7.17,14.7 7.18,14.66 7.2,14.63L8.1,13H15.55C16.3,13 16.96,12.58 17.3,11.97L20.88,5.5C20.95,5.34 21,5.17 21,5A1,1 0 0,0 20,4H5.21L4.27,2M7,18C5.89,18 5,18.89 5,20A2,2 0 0,0 7,22A2,2 0 0,0 9,20C9,18.89 8.1,18 7,18Z'/%3E%3C/svg%3E") !important;
        
        background-repeat: no-repeat !important;
        background-position: center !important;
        background-size: contain !important;
    }

  /* =========================================
    Swym: Other Styling 
    ========================================= */

  .swym-ui-components .swym-bg-2, .swym-ui-component .swym-bg-2 {
      background: #e31c21;
  }

  .swym-ui-component ul.swym-wishlist-grid {
      max-width: 1200px;
  }

  a.swym-wishlist-image-wrapper {
      height: unset !important;
  }

  .swym-product-price.swym-text.swym-text-1 {
      padding: unset !important;
  }

  .swym-variant-title.swym-text.swym-title-2 {
      margin: unset !important;
  }

  button.swym-share-btn.swym-color-2 {
      border-radius: 10px;
  }

  .swym-wishlist-title-container {
      border-radius: 10px !important;
  }

  span.swym-heading-3.swym-tab-active.swym-bg-2.swym-color-4 {
      border-radius: 10px;
  }
</style>