<script defer>
  function swymCallbackFn(swat) {
    // Re-init Swym buttons after collections load
    document.addEventListener('swym:collections-loaded', function () {
      setTimeout(function () {
        // Initialize all action buttons within the product badges container
        swat.initializeActionButtons('.product-badges');
      }, 500);
    });

    // Initialize on page load
    document.addEventListener('DOMContentLoaded', function () {
      if (swat) swat.initializeActionButtons('.product-badges');
    });

    // Prevent navigation when wishlist button is inside a product link
    document.addEventListener(
      'click',
      function (e) {
        const swymBtn = e.target.closest('.swym-button, .collection-wishlist-icon');
        if (!swymBtn) return;

        const productLink = swymBtn.closest('a.product-card__link');
        if (productLink) {
          e.preventDefault(); // Stop navigation
          e.stopImmediatePropagation(); // Allow Swym to handle internally
        }
      },
      true
    );

    // Optional: block pointerdown to prevent early navigation
    document.addEventListener(
      'pointerdown',
      function (e) {
        const swymBtn = e.target.closest('.swym-button, .collection-wishlist-icon');
        if (!swymBtn) return;

        const productLink = swymBtn.closest('a.product-card__link');
        if (productLink) {
          e.stopImmediatePropagation();
        }
      },
      true
    );
  }

  // Add callback to Swym queue
  if (!window.SwymCallbacks) window.SwymCallbacks = [];
  window.SwymCallbacks.push(swymCallbackFn);
</script>

<script>
  document.addEventListener(
    'pointerdown',
    function (e) {
      if (e.target.closest('.swym-button')) {
        const pcl = e.target.closest('product-card-link');
        if (pcl) {
          e.stopImmediatePropagation();
        }
      }
    },
    true
  );

  document.addEventListener(
    'click',
    function (e) {
      if (e.target.closest('.swym-button')) {
        const pcl = e.target.closest('product-card-link');
        if (pcl) {
          e.preventDefault();
          e.stopImmediatePropagation();
          return false;
        }
      }
    },
    true
  );
</script>

<style>
    .swym-button {
    position: relative;
    z-index: 999 !important;
  }

  .product-card__link {
    z-index: 1;
  }
</style>
<script defer>
  function swymCallbackFn(swat){

    swat.collectionsApi.initializeCollections(
      swat,
      false,
      Shopify.theme.id
    );
  }
  if(!window.SwymCallbacks){
    window.SwymCallbacks = [];
  }
  window.SwymCallbacks.push(swymCallbackFn);
</script>